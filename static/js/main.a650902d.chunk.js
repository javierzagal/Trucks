(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{40:function(e,n,t){},41:function(e,n,t){},48:function(e,n,t){"use strict";t.r(n);var c=t(1),i=t.n(c),o=t(27),s=t.n(o),a=(t(40),t(25)),r=t(8),d=(t(41),t(50)),j=t(54),l=t(51),u=t(52),b=t(53),O=t(35),h=Object(O.a)("wss://tarea-3-websocket.2021-2.tallerdeintegracion.cl",{path:"/trucks/"});h.on("connect",(function(){console.log("check connection",h.connected)}));var f=h,x=t(7),p=t.n(x),m=p.a.icon({iconUrl:"https://sunshine-autos.ucoz.com/_ld/0/75951138.png",iconSize:[58,49]}),v=p.a.icon({iconUrl:"https://i.ibb.co/Njg97b6/damagedtruck.png",iconSize:[58,58]}),g=new Array;g[0]=m,g[1]=v;var S=p.a.icon({iconUrl:"https://pixelartmaker-data-78746291193.nyc3.digitaloceanspaces.com/image/18e8ade00a66467.png",iconSize:[45,30]}),I=p.a.icon({iconUrl:"https://cdn.picpng.com/flag/flag-icon-flag-icon-destination-53089.png",iconSize:[45,30]}),N=t(0);var y=function(){var e=Object(c.useState)([]),n=Object(r.a)(e,2),t=n[0],i=n[1],o=Object(c.useState)([]),s=Object(r.a)(o,2),O=s[0],h=s[1],x=Object(c.useState)([]),p=Object(r.a)(x,2),m=p[0],v=p[1],y=Object(c.useState)(""),C=Object(r.a)(y,2),k=C[0],F=C[1],T=Object(c.useState)([]),U=Object(r.a)(T,2),D=U[0],z=U[1],w=Object(c.useState)(""),A=Object(r.a)(w,2),E=A[0],K=A[1],R=Object(c.useState)("defaultUsername"),X=Object(r.a)(R,2),H=X[0],L=X[1];Object(c.useEffect)((function(){return f.emit("TRUCKS"),f.emit("CHAT"),f.on("TRUCKS",(function(e){h(e)})),f.on("FAILURE",(function(e){e.source="Falla de ".concat(e.source);var n=m.find((function(n){return n.code===e.code}));if("undefined"!==typeof n){var c=m;c[c.indexOf(n)]=e,v(c);var o=t.find((function(n){return n.code==e.code})),s=t,r={code:o.code,position:o.position,iconInt:1};s[s.indexOf(o)]=r,i(s)}else v([].concat(Object(a.a)(m),[e]))})),f.on("CHAT",(function(e){var n={date:new Date(e.date).toString(),message:e.message,name:e.name};z([].concat(Object(a.a)(D),[n]))})),f.on("FIX",(function(e){var n={code:e.code,source:"OK"},c=m.find((function(n){return n.code===e.code})),o=m;o[m.indexOf(c)]=n,v(o);var s=t.find((function(n){return n.code==e.code})),a=t,r={code:s.code,position:s.position,iconInt:0};a[a.indexOf(s)]=r,i(a)})),f.on("POSITION",(function(e){m.find((function(n){return n.code===e.code}));var n={code:e.code,position:e.position,iconInt:0},c={code:e.code,source:"OK"},o=t.find((function(e){return e.code===n.code}));if("undefined"!==typeof o){var s=t;n.iconInt=o.iconInt,s[s.indexOf(o)]=n,i(s)}else v([].concat(Object(a.a)(m),[c])),i([].concat(Object(a.a)(t),[n]))})),function(){f.off()}}),[t,O]);var P=function(){var e={code:k};f.emit("FIX",e),F("")};return Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)("div",{className:"overall",children:[Object(N.jsx)("div",{className:"map",children:Object(N.jsxs)(d.a,{center:[-22,-68.5],zoom:10,scrollWheelZoom:!0,children:[Object(N.jsx)(j.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t.map((function(e){return Object(N.jsx)(l.a,{position:[e.position[0],e.position[1]],icon:g[e.iconInt],children:Object(N.jsxs)(u.a,{children:[e.code,Object(N.jsx)("form",{onSubmit:function(e){e.preventDefault(),P()},children:Object(N.jsx)("button",{onClick:function(n){return F(e.code)},type:"submit",children:" FIX "})})]})})})),O.map((function(e){return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(b.a,{positions:[[e.origin[0],e.origin[1]],[e.destination[0],e.destination[1]]]}),Object(N.jsxs)(l.a,{position:[e.origin[0],e.origin[1]],icon:S,children:[" ",Object(N.jsxs)(u.a,{children:[" ",e.code," "]})," "]}),Object(N.jsxs)(l.a,{position:[e.destination[0],e.destination[1]],icon:I,children:[" ",Object(N.jsx)(u.a,{children:e.code})]})]})}))]})}),Object(N.jsxs)("div",{className:"chat-box",children:[Object(N.jsx)("p",{className:"p1",children:" Chat "}),Object(N.jsx)("br",{}),Object(N.jsx)("p",{children:" Nombre de usuario: "}),Object(N.jsxs)("form",{onSubmit:function(e){e.preventDefault(),L(H)},children:[Object(N.jsx)("input",{type:"text",value:H,placeholder:"Username",onChange:function(e){return L(e.target.value)}}),Object(N.jsx)("button",{type:"submit",children:" Cambiar "})]}),Object(N.jsx)("div",{className:"chat-container",children:D.map((function(e){return Object(N.jsxs)("div",{className:"msj-container",children:[Object(N.jsx)("div",{children:Object(N.jsxs)("p",{className:"user-name",children:[" ",e.name," "]})}),Object(N.jsxs)("div",{className:"msj-text",children:[Object(N.jsxs)("h3",{children:[e.message," "]}),Object(N.jsxs)("p",{children:[" Date: ",e.date," "]}),Object(N.jsx)("br",{})]})]})}))}),Object(N.jsx)("br",{}),Object(N.jsxs)("form",{onSubmit:function(e){e.preventDefault(),function(){var e={message:E,name:H};f.emit("CHAT",e),K("")}()},children:[Object(N.jsx)("input",{type:"text",value:E,placeholder:"Ingresa un mensaje",onChange:function(e){return K(e.target.value)}}),Object(N.jsx)("button",{type:"submit",children:" ENVIAR "})]})]}),Object(N.jsxs)("div",{className:"infobox",children:[Object(N.jsx)("p",{className:"p1",children:" Informaci\xf3n de los camiones"}),Object(N.jsx)("br",{}),Object(N.jsx)("div",{className:"card-container",children:O.map((function(e){var n;return Object(N.jsxs)("div",{className:"card",children:[Object(N.jsx)("div",{className:"card-title",children:Object(N.jsxs)("h1",{children:[" Codigo: ",e.code]})}),Object(N.jsxs)("div",{className:"truckinfo-text",children:[Object(N.jsx)("div",{children:Object(N.jsxs)("h3",{children:[" Truck: ",e.truck]})}),Object(N.jsx)("div",{children:Object(N.jsxs)("h3",{children:[" Engine: ",e.engine]})}),Object(N.jsx)("div",{children:Object(N.jsxs)("h3",{children:[" Capacidad: ",e.capacity]})}),Object(N.jsx)("div",{children:Object(N.jsxs)("h3",{children:[" Origen: ",e.origin]})}),Object(N.jsxs)("div",{children:[Object(N.jsx)("h2",{children:"Destino: "}),Object(N.jsxs)("h3",{children:[" ",e.destination]})]}),Object(N.jsxs)("div",{children:[Object(N.jsxs)("h3",{children:[" Estatus: ",null===(n=m.find((function(n){return n.code===e.code})))||void 0===n?void 0:n.source]}),Object(N.jsx)("form",{onSubmit:function(e){e.preventDefault(),P()},children:Object(N.jsx)("button",{onClick:function(n){return F(e.code)},type:"submit",children:" FIX "})})]}),Object(N.jsx)("h2",{children:" Operadores"}),e.staff.map((function(e){return Object(N.jsx)("div",{children:Object(N.jsxs)("h3",{children:[" ",e.name,", ",e.age," a\xf1os"]})})}))]})]})}))})]})]})})},C=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,55)).then((function(n){var t=n.getCLS,c=n.getFID,i=n.getFCP,o=n.getLCP,s=n.getTTFB;t(e),c(e),i(e),o(e),s(e)}))};s.a.render(Object(N.jsx)(i.a.StrictMode,{children:Object(N.jsx)(y,{})}),document.getElementById("root")),C()}},[[48,1,2]]]);
//# sourceMappingURL=main.a650902d.chunk.js.map