(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{40:function(e,t,n){},41:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n.n(c),s=n(27),o=n.n(s),a=(n(40),n(25)),r=n(8),j=(n(41),n(50)),d=n(54),l=n(51),b=n(52),u=n(53),O=n(35),h=Object(O.a)("wss://tarea-3-websocket.2021-2.tallerdeintegracion.cl",{path:"/trucks/"});h.on("connect",(function(){console.log("check connection",h.connected)}));var x=h;var m=n(7),p=n.n(m),f=p.a.icon({iconUrl:"https://sunshine-autos.ucoz.com/_ld/0/75951138.png",iconSize:[58,49]}),g=p.a.icon({iconUrl:"https://i.imgur.com/puSMlJB.png",iconSize:[58,49]}),v=new Array;v[0]=f,v[1]=g;var S=p.a.icon({iconUrl:"https://pixelartmaker-data-78746291193.nyc3.digitaloceanspaces.com/image/18e8ade00a66467.png",iconSize:[45,30]}),N=p.a.icon({iconUrl:"https://cdn.picpng.com/flag/flag-icon-flag-icon-destination-53089.png",iconSize:[45,30]}),y=n(0);var C=function(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),n=t[0],i=t[1],s=Object(c.useState)([]),o=Object(r.a)(s,2),O=o[0],h=o[1],m=Object(c.useState)([]),p=Object(r.a)(m,2),f=p[0],g=p[1],C=Object(c.useState)(""),I=Object(r.a)(C,2),F=I[0],k=I[1],T=Object(c.useState)([]),U=Object(r.a)(T,2),z=U[0],D=U[1],w=Object(c.useState)(""),A=Object(r.a)(w,2),E=A[0],M=A[1],K=Object(c.useState)("defaultUsername"),R=Object(r.a)(K,2),B=R[0],H=R[1];return Object(c.useEffect)((function(){return x.emit("TRUCKS"),x.emit("CHAT"),x.on("TRUCKS",(function(e){h(e)})),x.on("FAILURE",(function(e){e.source="Falla de ".concat(e.source);var t=f.find((function(t){return t.code===e.code}));if("undefined"!==typeof t){var n=f;n[n.indexOf(t)]=e,g(n)}else g([].concat(Object(a.a)(f),[e]))})),x.on("CHAT",(function(e){var t={date:new Date(e.date).toString(),message:e.message,name:e.name};D([].concat(Object(a.a)(z),[t]))})),x.on("FIX",(function(e){var t={code:e.code,source:"OK"},n=f.find((function(t){return t.code===e.code})),c=f;c[f.indexOf(n)]=t,g(c)})),x.on("POSITION",(function(e){var t,c,s={code:e.code,position:e.position,iconInt:(t=0,c=2,Math.floor(Math.random()*(c-t))+t)},o={code:e.code,source:"OK"},r=n.find((function(e){return e.code===s.code}));if("undefined"!==typeof r){var j=n;j[j.indexOf(r)]=s,i(j)}else g([].concat(Object(a.a)(f),[o])),i([].concat(Object(a.a)(n),[s]))})),function(){x.off()}}),[n,O]),Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)("div",{className:"overall",children:[Object(y.jsx)("div",{className:"map",children:Object(y.jsxs)(j.a,{center:[-22,-68.5],zoom:10,scrollWheelZoom:!0,children:[Object(y.jsx)(d.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),n.map((function(e){return Object(y.jsx)(l.a,{position:[e.position[0],e.position[1]],icon:v[e.iconInt],children:Object(y.jsx)(b.a,{children:e.code})})})),O.map((function(e){return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(u.a,{positions:[[e.origin[0],e.origin[1]],[e.destination[0],e.destination[1]]]}),Object(y.jsxs)(l.a,{position:[e.origin[0],e.origin[1]],icon:S,children:[" ",Object(y.jsxs)(b.a,{children:[" ",e.code," "]})," "]}),Object(y.jsxs)(l.a,{position:[e.destination[0],e.destination[1]],icon:N,children:[" ",Object(y.jsx)(b.a,{children:e.code})]})]})}))]})}),Object(y.jsxs)("div",{className:"chat-box",children:[Object(y.jsx)("p",{className:"p1",children:" Chat "}),Object(y.jsx)("br",{}),Object(y.jsx)("p",{children:" Nombre de usuario: "}),Object(y.jsxs)("form",{onSubmit:function(e){e.preventDefault(),H(B)},children:[Object(y.jsx)("input",{type:"text",value:B,placeholder:"Username",onChange:function(e){return H(e.target.value)}}),Object(y.jsx)("button",{type:"submit",children:" Cambiar "})]}),Object(y.jsx)("div",{className:"chat-container",children:z.map((function(e){return Object(y.jsxs)("div",{className:"msj-container",children:[Object(y.jsx)("div",{children:Object(y.jsxs)("p",{className:"user-name",children:[" ",e.name," "]})}),Object(y.jsxs)("div",{className:"msj-text",children:[Object(y.jsxs)("h3",{children:[e.message," "]}),Object(y.jsxs)("p",{children:[" Date: ",e.date," "]}),Object(y.jsx)("br",{})]})]})}))}),Object(y.jsx)("br",{}),Object(y.jsxs)("form",{onSubmit:function(e){e.preventDefault(),function(){var e={message:E,name:B};x.emit("CHAT",e),M("")}()},children:[Object(y.jsx)("input",{type:"text",value:E,placeholder:"Ingresa un mensaje",onChange:function(e){return M(e.target.value)}}),Object(y.jsx)("button",{type:"submit",children:" ENVIAR "})]})]}),Object(y.jsxs)("div",{className:"infobox",children:[Object(y.jsx)("p",{className:"p1",children:" Informaci\xf3n de los camiones"}),Object(y.jsx)("br",{}),Object(y.jsx)("div",{className:"card-container",children:O.map((function(e){var t;return Object(y.jsxs)("div",{className:"card",children:[Object(y.jsx)("div",{className:"card-title",children:Object(y.jsxs)("h1",{children:[" Codigo: ",e.code]})}),Object(y.jsxs)("div",{className:"truckinfo-text",children:[Object(y.jsx)("div",{children:Object(y.jsxs)("h3",{children:[" Truck: ",e.truck]})}),Object(y.jsx)("div",{children:Object(y.jsxs)("h3",{children:[" Engine: ",e.engine]})}),Object(y.jsx)("div",{children:Object(y.jsxs)("h3",{children:[" Capacidad: ",e.capacity]})}),Object(y.jsx)("div",{children:Object(y.jsxs)("h3",{children:[" Origen: ",e.origin]})}),Object(y.jsxs)("div",{children:[Object(y.jsx)("h2",{children:"Destino: "}),Object(y.jsxs)("h3",{children:[" ",e.destination]})]}),Object(y.jsxs)("div",{children:[Object(y.jsxs)("h3",{children:[" Estatus: ",null===(t=f.find((function(t){return t.code===e.code})))||void 0===t?void 0:t.source]}),Object(y.jsx)("form",{onSubmit:function(e){e.preventDefault(),function(){var e={code:F};x.emit("FIX",e),k("")}()},children:Object(y.jsx)("button",{onClick:function(t){return k(e.code)},type:"submit",children:" FIX "})})]}),Object(y.jsx)("h2",{children:" Operadores"}),e.staff.map((function(e){return Object(y.jsx)("div",{children:Object(y.jsxs)("h3",{children:[" ",e.name,", ",e.age," a\xf1os"]})})}))]})]})}))})]})]})})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,55)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),c(e),i(e),s(e),o(e)}))};o.a.render(Object(y.jsx)(i.a.StrictMode,{children:Object(y.jsx)(C,{})}),document.getElementById("root")),I()}},[[48,1,2]]]);
//# sourceMappingURL=main.5c15c879.chunk.js.map